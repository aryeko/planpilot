# Example: Full Workflow (Idea → PRD → Spec → Plans)

This directory contains artifacts generated by running the complete planpilot skill chain end-to-end. The feature used as the test case is a hypothetical `planpilot validate` CLI command.

## Workflow

```mermaid
flowchart LR
    A["Feature idea"] -->|create-prd| B["PRD"]
    B -->|create-tech-spec| C["Tech Spec"]
    C -->|plan-sync| D["Plans JSON"]
```

| Step | Skill | Input | Output |
|------|-------|-------|--------|
| 1 | `create-prd` | Brief feature idea | [`prd/planpilot-validate-prd.md`](prd/planpilot-validate-prd.md) |
| 2 | `create-tech-spec` | PRD + codebase analysis | [`spec/planpilot-validate-spec.md`](spec/planpilot-validate-spec.md) |
| 3 | `plan-sync` | Tech spec | [`plans/`](plans/) (epics, stories, tasks) |

## Artifacts

### PRD (`prd/`)

Product Requirements Document with 9 sections: Overview, Motivation, Goals & Non-Goals, Target Audience, Requirements (22 numbered), Success Metrics (9), Diagrams (3 mermaid), Constraints & Assumptions, Open Questions.

### Tech Spec (`spec/`)

Codebase-aware technical specification with:
- System context diagram showing integration with existing architecture
- 22 technical requirements tracing back to PRD requirements
- Dynamic sections: Components & Architecture, API Design
- 4 mermaid diagrams (context, component, pipeline, sequence)
- Technical decisions with rationale and alternatives
- Validation strategy (unit, integration, E2E tests)

### Plans (`plans/`)

Schema-aligned plan files ready for `planpilot sync`:
- **1 epic** — Implement planpilot validate CLI command
- **4 stories** — Core validation, advanced validation, CLI integration, testing
- **15 tasks** — With dependencies, estimates, and verification commands

```text
E-1 Implement planpilot validate CLI command
├── S-1 Core validation pipeline
│   ├── T-1 JSON syntax validation
│   ├── T-2 Schema validation (depends on T-1)
│   └── T-3 Hierarchy validation (depends on T-2)
├── S-2 Advanced validation
│   ├── T-4 Cycle detection (DFS)
│   └── T-5 ID uniqueness (depends on T-4)
├── S-3 CLI integration
│   ├── T-6 CLI parser
│   ├── T-7 Config/directory discovery (depends on T-6)
│   ├── T-8 Report formatter (depends on T-5)
│   └── T-9 Command handler (depends on T-8)
└── S-4 Testing
    ├── T-10 Unit tests: path resolution
    ├── T-11 Unit tests: JSON/schema validation
    ├── T-12 Unit tests: hierarchy/cycles/uniqueness
    ├── T-13 Integration tests (depends on T-10, T-11, T-12)
    ├── T-14 E2E tests (depends on T-13)
    └── T-15 Performance tests (depends on T-13)
```

## Reproducing

### Preview the plans (offline dry-run)

```bash
planpilot sync --config examples/full-workflow/planpilot.json --dry-run
```

### Regenerate from scratch

To regenerate these artifacts from scratch using the skill chain:

1. Run the `create-prd` skill with a feature idea
2. Run `create-tech-spec` pointing at the generated PRD
3. Run `plan-sync` pointing at the generated spec
